{"version":3,"sources":["webpack://[name]/./src/state-diagram/StateViz.css","webpack://[name]/./src/tape/tape.css","webpack://[name]/./src/TMViz.js","webpack://[name]/./src/TuringMachine.js","webpack://[name]/./src/state-diagram/StateGraph.js","webpack://[name]/./src/state-diagram/StateViz.js","webpack://[name]/./src/tape/Tape.js","webpack://[name]/./src/tape/TapeViz.js","webpack://[name]/./src/util.js","webpack://[name]/./src/watch.js","webpack://[name]/external \"_\"","webpack://[name]/external \"d3\"","webpack://[name]/external \"lodash\"","webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/startup","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/webpack/runtime/make namespace object","webpack://[name]/webpack/runtime/publicPath"],"names":["TuringMachine","TapeViz","StateGraph","StateViz","watchInit","d3","pulseEdge","edge","select","domNode","classed","transition","style","duration","each","this","addTape","div","spec","append","attr","blank","input","String","split","module","exports","posTable","graph","table","stateviz","getVertexMap","getEdges","undefined","positionTable","edgeAnimation","stepInterval","self","machine","animationCallback","state","symbol","tuple","getInstructionAndEdge","isRunning","step","instruction","animatedTransition","startState","prop","oldstate","newstate","getVertex","isHalted","Object","defineProperty","configurable","get","set","value","__parentDiv","__spec","tape","remove","instruct","nextInstruction","write","direction","MoveHead","right","headRight","left","headLeft","TypeError","move","defineProperties","prototype","read","enumerable","freeze","toString","_","normalize","defaults","visibleSpace","c","derived","mapValues","transitions","label","allEdges","forEach","vertex","stateTransitions","cache","symbolKey","symbols","reduce","acc","x","length","push","target","tap","source","labels","bind","edgeTo","action","rightSide","map","join","labelFor","edges","deriveGraph","__graph","__edges","Error","isBrowserIEorEdge","assign","addV","array1","array2","i","subtractV","normV","array","Math","sqrt","y","normSqV","vectorFromLengthAngle","angle","cos","sin","EdgeCounter","e","key","index","src","EdgeShape","loop","numEdgesFromTo","arc","straight","identity","noop","limitRange","min","max","appendSVGTo","hwRatio","width","height","position","top","getPositionTable","pick","container","nodes","linkArray","w","h","nodeRadius","colors","scale","category10","svg","nodeArray","Array","values","__stateMap","force","layout","links","size","linkDistance","charge","theta","gravity","start","drag","on","d","fixed","edgeCounter","edgegroups","selectAll","data","enter","labelAbove","labelBelow","edgeD","edgeIndex","group","edgepath","text","shape","shapeForEdge","isFlipped","getPath","loopEndOffset","loopArc","PI","p1","p2","offset","radius","atan2","angleV","sep","n","unitV","scalar","edgePathFor","refreshLabels","svgrect","getBBox","shouldFlip","edgepaths","nodeSelection","nodecircles","resume","call","nodelabels","lastIndexOf","svgCSS","styleSheet","cssText","textContent","cx","cy","every","stop","stateMap","node","setPositionTable","writable","before","after","slice","reverse","last","pop","isEmpty","end","range","readOffset","Tape","initTapeCells","selection","datum","cellWidth","cellHeight","positionCells","repositionWrapper","wrapper","moveHead","exit","wOffset","cOffset","lookaround","super","readRange","childNodes","insert","Boolean","document","documentMode","window","StyleMedia","thisArg","handler","desc","getOwnPropertyDescriptor","accessors","newval","val","watch","lodash","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","definition","o","obj","hasOwnProperty","r","Symbol","toStringTag","p"],"mappings":"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","file":"TMViz.bundle.js","sourcesContent":["export default __webpack_public_path__ + \"state-diagram/StateViz.css\";","export default __webpack_public_path__ + \"tape/tape.css\";","'use strict';\n/**\n * Turing machine visualization component.\n *\n * â€¢ Adds running and reset on top of the base Turing machine.\n * â€¢ Displays an animated state diagram and tape diagram.\n * Does not include UI elements for controlling the machine.\n *\n * @module\n */\n\nconst TuringMachine = require('./TuringMachine').TuringMachine, TapeViz = require('./tape/TapeViz'), StateGraph = require('./state-diagram/StateGraph'), StateViz = require('./state-diagram/StateViz'), watchInit = require('./watch').watchInit, d3 = require('d3');\n\n/**\n * Create an animated transition function.\n * @param  {StateGraph} graph\n * @param  {LayoutEdge -> any} animationCallback\n * @return {(string, string) -> Instruction} Created transition function.\n */\nfunction animatedTransition(graph, animationCallback) {\n  return (state, symbol) => {\n    const tuple = graph.getInstructionAndEdge(state, symbol);\n    if (tuple == null) { return null; }\n\n    animationCallback(tuple.edge);\n    return tuple.instruction;\n  };\n}\n\n/**\n * Default edge animation callback.\n * @param  {{domNode: Node}} edge\n * @return {D3Transition} The animation. Use this for transition chaining.\n */\nfunction pulseEdge(edge) {\n  const edgepath = d3.select(edge.domNode);\n  return edgepath\n    .classed('active-edge', true)\n    .transition()\n    .style('stroke-width', '3px')\n    .transition()\n    .style('stroke-width', '1px')\n    .transition()\n    .duration(0)\n    .each('start', /* @this edge */ function () {\n      d3.select(this).classed('active-edge', false);\n    })\n    .style('stroke', null)\n    .style('stroke-width', null);\n}\n\nfunction addTape(div, spec) {\n  return new TapeViz(div.append('svg').attr('class', 'tm-tape'), 9,\n    spec.blank, spec.input ? String(spec.input).split('') : []);\n}\n\n/**\n * Construct a new state and tape visualization inside a &lt;div&gt;.\n * @constructor\n * @param {HTMLDivElement} div        div to take over and use.\n * @param                  spec       machine specification\n * @param {PositionTable} [posTable]  position table for the state nodes\n */\nclass TMViz {\n  constructor(div, spec, posTable) {\n    div = d3.select(div);\n    const graph = new StateGraph(spec.table);\n    this.stateviz = new StateViz(\n      div,\n      graph.getVertexMap(),\n      graph.getEdges()\n    );\n    if (posTable != undefined) { this.positionTable = posTable; }\n\n    this.edgeAnimation = pulseEdge;\n    this.stepInterval = 100;\n\n    const self = this;\n    // We hook into the animation callback to know when to start the next step (when running).\n    function animateAndContinue(edge) {\n      const transition = self.edgeAnimation(edge);\n      if (self.isRunning) {\n        transition.transition().duration(self.stepInterval).each('end', () => {\n          // stop if machine was paused during the animation\n          if (self.isRunning) { self.step(); }\n        });\n      }\n    }\n\n    this.machine = new TuringMachine(\n      animatedTransition(graph, animateAndContinue),\n      spec.startState,\n      addTape(div, spec)\n    );\n    // intercept and animate when the state is set\n    watchInit(this.machine, 'state', (prop, oldstate, newstate) => {\n      d3.select(graph.getVertex(oldstate).domNode).classed('current-state', false);\n      d3.select(graph.getVertex(newstate).domNode).classed('current-state', true);\n      return newstate;\n    });\n\n    // Sidenote: each \"Step\" click evaluates the transition function once.\n    // Therefore, detecting halting always requires its own step (for consistency).\n    this.isHalted = false;\n\n    let isRunning = false;\n    /**\n     * Set isRunning to true to run the machine, and false to stop it.\n     */\n    Object.defineProperty(this, 'isRunning', {\n      configurable: true,\n      get: function () { return isRunning; },\n      set: function (value) {\n        if (isRunning !== value) {\n          isRunning = value;\n          if (isRunning) { this.step(); }\n        }\n      }\n    });\n\n    this.__parentDiv = div;\n    this.__spec = spec;\n  }\n\n  /**\n   * Step the machine immediately and interrupt any animations.\n   */\n  step() {\n    if (!this.machine.step()) {\n      this.isRunning = false;\n      this.isHalted = true;\n    }\n  }\n\n  /**\n   * Reset the Turing machine to its starting configuration.\n   */\n  reset() {\n    this.isRunning = false;\n    this.isHalted = false;\n    this.machine.state = this.__spec.startState;\n    this.machine.tape.domNode.remove();\n    this.machine.tape = addTape(this.__parentDiv, this.__spec);\n  }\n\n  get positionTable() { return this.stateviz.positionTable; }\n  set positionTable(posTable) { this.stateviz.positionTable = posTable; }\n}\n\nmodule.exports = TMViz;\n","'use strict';\n\n/**\n * Construct a Turing machine.\n * @param {(state, symbol) -> ?{state: state, symbol: symbol, move: direction}}\n *   transition\n *   A transition function that, given *only* the current state and symbol,\n *   returns an object with the following properties: symbol, move, and state.\n *   Returning null/undefined halts the machine (no transition defined).\n * @param {state} startState  The state to start in.\n * @param         tape        The tape to use.\n */\nclass TuringMachine {\n  constructor(transition, startState, tape) {\n    this.transition = transition;\n    this.state = startState;\n    this.tape = tape;\n  }\n\n  toString() {\n    return String(this.state) + '\\n' + String(this.tape);\n  }\n\n  /**\n   * Step to the next configuration according to the transition function.\n   * @return {boolean} true if successful (the transition is defined),\n   *   false otherwise (machine halted)\n   */\n  step() {\n    const instruct = this.nextInstruction;\n    if (instruct == null) { return false; }\n\n    this.tape.write(instruct.symbol);\n    move(this.tape, instruct.move);\n    this.state = instruct.state;\n\n    return true;\n  }\n}\n\nObject.defineProperties(TuringMachine.prototype, {\n  nextInstruction: {\n    get: function () { return this.transition(this.state, this.tape.read()); },\n    enumerable: true\n  },\n  isHalted: {\n    get: function () { return this.nextInstruction == null; },\n    enumerable: true\n  }\n});\n\n// Allows for both notational conventions of moving the head or moving the tape\nfunction move(tape, direction) {\n  switch (direction) {\n    case MoveHead.right: tape.headRight(); break;\n    case MoveHead.left:  tape.headLeft();  break;\n    default: throw new TypeError('not a valid tape movement: ' + String(direction));\n  }\n}\nvar MoveHead = Object.freeze({\n  left:  {toString: function () { return 'L'; } },\n  right: {toString: function () { return 'R'; } }\n});\nconst MoveTape = Object.freeze({left: MoveHead.right, right: MoveHead.left});\n\nexports.MoveHead = MoveHead;\nexports.MoveTape = MoveTape;\nexports.TuringMachine = TuringMachine;\n","'use strict';\n\nconst _ = require('lodash');\n\n\n/* Interface\n  type TransitionTable = {\n    [state: string]: ?{\n      [symbol: string]: Instruction\n    }\n  };\n  type Instruction = { state?: string, symbol?: string };\n\n  type DiagramGraph = {\n    [state: string]: {\n      label: string,\n      transitions: ?{\n        [symbol: string]: {\n          instruction: Instruction,\n          edge: LayoutEdge\n        }\n      }\n    }\n  };\n  type LayoutEdge = { source: Object, target: Object, labels: [string] }\n */\n\n/**\n * Use a transition table to derive the graph (vertices & edges) for a D3 diagram.\n * Edges with the same source and target are combined.\n * NB. In addition to single symbols, comma-separated symbols are supported.\n * e.g. symbol string '0,1,,,I' -> symbols [0,1,',','I'].\n */\n// TransitionTable -> DiagramGraph\nfunction deriveGraph(table) {\n  // We need two passes, since edges may point at vertices yet to be created.\n  // 1. Create all the vertices.\n  const graph = _.mapValues(table, (transitions, state) => {\n    return {\n      label: state,\n      transitions: transitions\n    };\n  });\n  // 2. Create the edges, which can now point at any vertex object.\n  const allEdges = [];\n  _.forEach(graph, (vertex, state) => {\n\n    vertex.transitions = vertex.transitions && (() => {\n      const stateTransitions = {};\n\n      // Combine edges with the same source and target\n      const cache = {};\n      function edgeTo(target, label) {\n        const edge = cache[target] ||\n          _.tap(cache[target] = {\n            source: vertex,\n            target: graph[target],\n            labels: []\n          }, allEdges.push.bind(allEdges));\n        edge.labels.push(label);\n        return edge;\n      }\n      // Create symbol -> instruction object map\n      _.forEach(vertex.transitions, (instruct, symbolKey) => {\n        // Handle comma-separated symbols.\n        // Recreate array by splitting on ','. Treat 2 consecutive ',' as , ','.\n        const symbols = symbolKey.split(',').reduce((acc, x) => {\n          if (x === '' && acc[acc.length-1] === '') {\n            acc[acc.length-1] = ',';\n          } else {\n            acc.push(x);\n          }\n          return acc;\n        }, []);\n        const target = instruct.state != null ? instruct.state : state;\n        const edge = edgeTo(target, labelFor(symbols, instruct));\n\n        symbols.forEach(symbol => {\n          stateTransitions[symbol] = {\n            // Normalize for execution, but display the less-cluttered original.\n            instruction: normalize(state, symbol, instruct),\n            edge: edge\n          };\n        });\n      });\n\n      return stateTransitions;\n    })();\n\n  });\n\n  return {graph: graph, edges: allEdges};\n}\n\n// Normalize an instruction to include an explicit state and symbol.\n// e.g. {symbol: '1'} normalizes to {state: 'q0', symbol: '1'} when in state q0.\nfunction normalize(state, symbol, instruction) {\n  return _.defaults({}, instruction, {state: state, symbol: symbol});\n}\n\nfunction labelFor(symbols, action) {\n  const rightSide = ((action.symbol == null) ? '' : (visibleSpace(String(action.symbol)) + ','))\n    + String(action.move);\n  return symbols.map(visibleSpace).join(',') + 'â†’' + rightSide;\n}\n\n// replace ' ' with 'â£'.\nfunction visibleSpace(c) {\n  return (c === ' ') ? 'â£' : c;\n}\n\n\n/**\n * Aids rendering and animating a transition table in D3.\n *\n * â€¢ Generates the vertices and edges (\"nodes\" and \"links\") for a D3 diagram.\n * â€¢ Provides mapping of each state to its vertex and each transition to its edge.\n * @param {TransitionTable} table\n */\nclass StateGraph {\n  constructor(table) {\n    const derived = deriveGraph(table);\n    Object.defineProperties(this, {\n      __graph: { value: derived.graph },\n      __edges: { value: derived.edges }\n    });\n  }\n\n  /**\n   * D3 layout \"nodes\".\n   */\n  // StateGraph.prototype.getVertices = function () {\n  //   return _.values(this.__graph);\n  // };\n\n  /**\n   * Returns the mapping from states to vertices (D3 layout \"nodes\").\n   * @return { {[state: string]: Object} }\n   */\n  getVertexMap() {\n    return this.__graph;\n  }\n\n  /**\n   * D3 layout \"links\".\n   */\n  getEdges() {\n    return this.__edges;\n  }\n\n  /**\n   * Look up a state's corresponding D3 \"node\".\n   */\n  getVertex(state) {\n    return this.__graph[state];\n  }\n\n  getInstructionAndEdge(state, symbol) {\n    const vertex = this.__graph[state];\n    if (vertex === undefined) {\n      throw new Error('not a valid state: ' + String(state));\n    }\n\n    return vertex.transitions && vertex.transitions[symbol];\n  }\n}\n\n\nmodule.exports = StateGraph;\n","'use strict';\n\nconst isBrowserIEorEdge = require('../util').isBrowserIEorEdge;\nconst d3 = require('d3');\nconst _ = require('lodash/fp');\nconst assign = require('lodash').assign; // need mutable assign()\n\n// *** Arrays as vectors ***\n\n// Add vectors.\n// Note: dimensions are not checked. Missing dimensions become NaN.\nfunction addV(array1, array2) {\n  return array1.map((x, i) => { return x + array2[i]; });\n}\n\nfunction negateV(array) {\n  return array.map(x => { return -x; });\n}\n\nfunction subtractV(array1, array2) {\n  return addV(array1, negateV(array2));\n}\n\n// Scale the vector by a scalar.\nfunction multiplyV(array, scalar) {\n  return array.map(x => { return scalar*x; });\n}\n\n// Vector norm, squared\nfunction normSqV(array) {\n  function sq(x) { return x*x; }\n  function add(x, y) { return x + y; }\n  return array.map(sq).reduce(add, 0);\n}\n\n// Vector norm\nfunction normV(array) { return Math.sqrt(normSqV(array)); }\n\n// Return a copy of the vector rescaled as a unit vector (norm = 1).\nfunction unitV(array) {\n  const n = normV(array);\n  return array.map(x => { return x / n; });\n}\n\n// *** 2D Vectors ***\nfunction angleV(array) {\n  const x = array[0], y = array[1];\n  return Math.atan2(y, x);\n}\n\nfunction vectorFromLengthAngle(length, angle) {\n  return [Math.cos(angle) * length, Math.sin(angle) * length];\n}\n\n// *** Utilities ***\n\n// Count the directed edges that start at a given node and end at another.\n// Important: each node must have a unique .index property.\n// Example usage:\n// var counts = new EdgeCounter(edges);\n// var edgesFrom2To5 = counts.numEdgesFromTo(2,5);\n// var edgesFrom5to2 = counts.numEdgesFromTo(5,2);\nclass EdgeCounter {\n  constructor(edges) {\n    edges.forEach(function (e) {\n      const key = e.source.index +','+ e.target.index;\n      this[key] = (this[key] || 0) + 1;\n    }, this);\n  }\n\n  numEdgesFromTo(src, target) {\n    return this[String(src)+','+String(target)] || 0;\n  }\n\n  shapeForEdge(e) {\n    if (e.target.index === e.source.index) {\n      return EdgeShape.loop;\n    } else if (this.numEdgesFromTo(e.target.index, e.source.index)) {\n      // has returning edge => arc\n      return EdgeShape.arc;\n    } else {\n      return EdgeShape.straight;\n    }\n  }\n}\n\nconst EdgeShape = Object.freeze({\n  loop: {},     // self-loop: a->a\n  arc: {},      // curved arc: a->b when b->a exists\n  straight: {}  // straight edge: a->b when b->a does not exist\n});\n\n// create a function that will compute an edge's SVG 'd' attribute.\nfunction edgePathFor(nodeRadius, shape, d) {\n  // case: self-loop\n  let loopEndOffset, loopArc;\n  if (shape === EdgeShape.loop) {\n    // start at the top (90Â°), end slightly above the right (15Â°)\n    loopEndOffset = vectorFromLengthAngle(nodeRadius, -15 * Math.PI/180);\n    loopArc = ' a 19,27 45 1,1 ' + loopEndOffset[0] + ',' + (loopEndOffset[1]+nodeRadius);\n    return () => {\n      const x1 = d.source.x, y1 = d.source.y;\n      return 'M ' + x1 + ',' + (y1-nodeRadius) + loopArc;\n    };\n  }\n  // case: between nodes\n  if (shape === EdgeShape.arc) {\n    // sub-case: arc\n    return () => {\n      // note: p1 & p2 have to be delayed, to access x/y at the time of the call\n      const p1 = [d.source.x, d.source.y];\n      const p2 = [d.target.x, d.target.y];\n      const offset = subtractV(p2, p1);\n      const radius = 6/5*normV(offset);\n      // Note: SVG's y-axis is flipped, so vector angles are negative\n      // relative to standard coordinates (as used in Math.atan2).\n      // Proof: angle(r <cos Ï´, -sin Ï´>) = angle(r <cos -Ï´, sin -Ï´>) = -Ï´.\n      const angle = angleV(offset);\n      const sep = -Math.PI/2/2; // 90Â° separation, half on each side\n      const source = addV(p1, vectorFromLengthAngle(nodeRadius, angle+sep));\n      const target = addV(p2, vectorFromLengthAngle(nodeRadius, angle+Math.PI-sep));\n      // IDEA: consider http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands\n      return (p1[0] <= p2[0])\n        ? 'M '+source[0]+' '+source[1]+' A '+radius+' '+radius+' 0 0,1 '+target[0]+' '+target[1]\n        : 'M '+target[0]+' '+target[1]+' A '+radius+' '+radius+' 0 0,0 '+source[0]+' '+source[1];\n    };\n  } else if (shape === EdgeShape.straight) {\n    return () => {\n      // sub-case: straight line\n      const p1 = [d.source.x, d.source.y];\n      const p2 = [d.target.x, d.target.y];\n      const offset = subtractV(p2, p1);\n      // avoid spurious errors when bounding causes node centers to coincide\n      if (offset[0] === 0 && offset[1] === 0) { return null; }\n\n      const target = subtractV(p2, multiplyV(unitV(offset), nodeRadius));\n      return 'M '+p1[0]+' '+p1[1]+' L '+ target[0] +' '+ target[1];\n    };\n  }\n}\n\nfunction rectCenter(svgrect) {\n  return {x: svgrect.x + svgrect.width/2,\n    y: svgrect.y + svgrect.height/2};\n}\n\nfunction identity(x) { return x; }\nfunction noop() {}\n\nfunction limitRange(min, max, value) {\n  return Math.max(min, Math.min(value, max));\n}\n\n// IE padding hack so that SVG resizes properly.\n// This works across browsers but we only need it for IE.\nconst appendSVGTo = !isBrowserIEorEdge\n  ? div => { return div.append('svg'); }\n  : (div, hwRatio) => {\n    return div\n      .append('div')\n      .style({\n        width: '100%',\n        height: '0',\n        'padding-bottom': (100 * hwRatio) + '%',\n        position: 'relative'\n      })\n      .append('svg')\n      .style({\n        position: 'absolute',\n        top: '0',\n        left: '0'\n      });\n  };\n\n// *** D3 diagram ***\nrequire('./StateViz.css');\n\n// type LayoutNode = {label: string};\n// type StateMap = {[state: string]: LayoutNode};\n\n/**\n * Create a state diagram inside an SVG.\n * Each vertex/edge (node/link) object is also annotated with @.domNode@\n * corresponding to its SVG element.\n *\n * Note: currently, element IDs (e.g. for textPath) will collide if multiple\n * diagrams are on the same document (HTML page).\n * @param  {D3Selection}      container     Container to add the SVG to.\n * @param  {[LayoutNode] | StateMap} nodes  Parameter to D3's force.nodes.\n *   Important: passing a StateMap is recommended when using setPositionTable.\n *   Passing an array will key the state nodes by array index.\n * @param  {[LayoutEdge]}     linkArray     Parameter to D3's force.links.\n */\nclass StateViz {\n  constructor(container, nodes, linkArray) {\n    /* References:\n      [Sticky Force Layout](http://bl.ocks.org/mbostock/3750558) demonstrates\n      drag to position and double-click to release.\n\n      [Graph with labeled edges](http://bl.ocks.org/jhb/5955887) demonstrates\n      arrow edges with auto-rotated labels.\n    */\n\n    /* eslint-disable no-invalid-this */ // eslint is not familiar with D3\n    const w = 800;\n    const h = 500;\n    const linkDistance = 140;\n    const nodeRadius = 20;\n\n    const colors = d3.scale.category10();\n\n    const svg = appendSVGTo(container, h/w);\n    svg.attr({\n      'viewBox': [0, 0, w, h].join(' '),\n      'version': '1.1',\n      ':xmlns': 'http://www.w3.org/2000/svg',\n      ':xmlns:xlink': 'http://www.w3.org/1999/xlink'\n    });\n\n    // Force Layout\n\n    // drag event handlers\n    function dragstart(d) {\n      d.fixed = true;\n      svg.transition()\n        .style('box-shadow', 'inset 0 0 1px gold');\n    }\n    function dragend() {\n      svg.transition()\n        .style('box-shadow', null);\n    }\n    function releasenode(d) {\n      d.fixed = false;\n      force.resume();\n    }\n\n    // set up force layout\n    const nodeArray = nodes instanceof Array ? nodes : _.values(nodes);\n    this.__stateMap = nodes;\n\n    var force = d3.layout.force()\n      .nodes(nodeArray)\n      .links(linkArray)\n      .size([w,h])\n      .linkDistance([linkDistance])\n      .charge([-500])\n      .theta(0.1)\n      .gravity(0.05)\n      .start();\n\n    const drag = force.drag()\n      .on('dragstart', dragstart)\n      .on('dragend', dragend);\n\n    // Edges\n    const edgeCounter = new EdgeCounter(linkArray);\n\n    const edgeselection = svg.selectAll('.edgepath')\n      .data(linkArray)\n      .enter();\n\n    const edgegroups = edgeselection.append('g');\n\n    const labelAbove = (d, i) => { return String(-1.1*(i+1)) + 'em'; };\n    const labelBelow = (d, i) => { return String(0.6+ 1.1*(i+1)) + 'em'; };\n\n    edgegroups.each(function (edgeD, edgeIndex) {\n      const group = d3.select(this);\n      const edgepath = group\n        .append('path')\n        .attr({'class': 'edgepath',\n          'id': 'edgepath'+edgeIndex })\n        .each(function (d) { d.domNode = this; });\n\n      const labels = group.selectAll('.edgelabel')\n        .data(edgeD.labels).enter()\n        .append('text')\n        .attr('class', 'edgelabel');\n      labels.append('textPath')\n        .attr('xlink:href', () => { return '#edgepath'+edgeIndex; })\n        .attr('startOffset', '50%')\n        .text(identity);\n      /* To reduce JS computation, label positioning varies by edge shape:\n          * Straight edges can use a fixed 'dy' value.\n          * Loops cannot use 'dy' since it increases letter spacing\n            as labels get farther from the path. Instead, since a loop's shape\n            is fixed, it allows a fixed translate 'transform'.\n          * Arcs are bent and their shape is not fixed, so neither 'dy'\n            nor 'transform' can be constant.\n            Fortunately the curvature is slight enough that a fixed 'dy'\n            looks good enough without resorting to dynamic translations.\n      */\n      const shape = edgeCounter.shapeForEdge(edgeD);\n      let isFlipped;\n      edgeD.getPath = edgePathFor(nodeRadius, shape, edgeD);\n      switch (shape) {\n        case EdgeShape.straight:\n          labels.attr('dy', labelAbove);\n          edgeD.refreshLabels = () => {\n            // flip edge labels that are upside-down\n            labels.attr('transform', function () {\n              if (edgeD.target.x < edgeD.source.x) {\n                const c = rectCenter(this.getBBox());\n                return 'rotate(180 '+c.x+' '+c.y+')';\n              } else {\n                return null;\n              }\n            });\n          };\n          break;\n        case EdgeShape.arc:\n          edgeD.refreshLabels = () => {\n            const shouldFlip = edgeD.target.x < edgeD.source.x;\n            if (shouldFlip !== isFlipped) {\n              edgepath.classed('reversed-arc', shouldFlip);\n              labels.attr('dy', shouldFlip ? labelBelow : labelAbove);\n              isFlipped = shouldFlip;\n            }\n          };\n          break;\n        case EdgeShape.loop:\n          labels.attr('transform', (d, i) => {\n            return 'translate(' + String(8*(i+1)) + ' ' + String(-8*(i+1)) + ')';\n          });\n          edgeD.refreshLabels = noop;\n          break;\n      }\n    });\n    const edgepaths = edgegroups.selectAll('.edgepath');\n\n    // Nodes\n    // note: nodes are added after edges so as to paint over excess edge lines\n    const nodeSelection = svg.selectAll('.node')\n      .data(nodeArray)\n      .enter();\n\n    const nodecircles = nodeSelection\n      .append('circle')\n      .attr('class', 'node')\n      .attr('r', nodeRadius)\n      .style('fill', (d, i) => { return colors(i); })\n      .each(function (d) { d.domNode = this; })\n      .on('dblclick', releasenode)\n      .call(drag);\n\n    const nodelabels = nodeSelection\n      .append('text')\n      .attr('class', 'nodelabel')\n      .attr('dy', '0.25em') /* dy doesn't work in CSS */\n      .text(d => { return d.label; });\n\n    // Arrowheads\n    const svgdefs = svg.append('defs');\n    svgdefs.selectAll('marker')\n      .data(['arrowhead', 'active-arrowhead', 'reversed-arrowhead', 'reversed-active-arrowhead'])\n      .enter().append('marker')\n      .attr({'id': function (d) { return d; },\n        'viewBox':'0 -5 10 10',\n        'refX': function (d) {\n          return (d.lastIndexOf('reversed-', 0) === 0) ? 0 : 10;\n        },\n        'orient':'auto',\n        'markerWidth':10,\n        'markerHeight':10\n      })\n      .append('path')\n      .attr('d', 'M 0 -5 L 10 0 L 0 5 Z')\n      .attr('transform', d => {\n        return (d.lastIndexOf('reversed-', 0) === 0) ? 'rotate(180 5 0)' : null;\n      });\n\n    const svgCSS =\n      '.edgepath {' +\n      '  marker-end: url(#arrowhead);' +\n      '}' +\n      '.edgepath.active-edge {' +\n      '  marker-end: url(#active-arrowhead);' +\n      '}' +\n      '.edgepath.reversed-arc {' +\n      '  marker-start: url(#reversed-arrowhead);' +\n      '  marker-end: none;' +\n      '}' +\n      '.edgepath.active-edge.reversed-arc {' +\n      '  marker-start: url(#reversed-active-arrowhead);' +\n      '  marker-end: none;' +\n      '}';\n    svg.append('style').each(function () {\n      if (this.styleSheet) {\n        this.styleSheet.cssText = svgCSS;\n      } else {\n        this.textContent = svgCSS;\n      }\n    });\n\n    // Force Layout Update\n    force.on('tick', () => {\n      // Keep coordinates in bounds. http://bl.ocks.org/mbostock/1129492\n      // NB. Bounding can cause node centers to coincide, especially at corners.\n      nodecircles.attr({cx: function (d) { return d.x = limitRange(nodeRadius, w - nodeRadius, d.x); },\n        cy: function (d) { return d.y = limitRange(nodeRadius, h - nodeRadius, d.y); }\n      });\n\n      nodelabels.attr('x', d => { return d.x; })\n        .attr('y', d => { return d.y; });\n\n      edgepaths.attr('d', d => { return d.getPath(); });\n\n      edgegroups.each(d => { d.refreshLabels(); });\n\n      // Conserve CPU when layout is fully fixed\n      if (nodeArray.every(d => { return d.fixed; })) {\n        force.stop();\n      }\n    });\n    this.force = force;\n    /* eslint-enable no-invalid-this */\n  }\n\n  get positionTable() { return getPositionTable(this.__stateMap); }\n\n  set positionTable(posTable) {\n    setPositionTable(posTable, this.__stateMap);\n    // ensure that a cooled layout will update\n    this.force.resume();\n  }\n}\n\n// Positioning\n\n// {[key: State]: Node} -> PositionTable\nconst getPositionTable = _.mapValues(_.pick(['x', 'y', 'px', 'py', 'fixed']));\n\n// Tag nodes w/ positions. Mutates the node map.\n// PositionTable -> {[key: State]: Node} -> void\nfunction setPositionTable(posTable, stateMap) {\n  _.forEach((node, state) => {\n    const position = posTable[state];\n    if (position !== undefined) {\n      assign(node, position);\n    }\n  }, stateMap);\n}\n\n\nmodule.exports = StateViz;\n","'use strict';\nconst _ = require('lodash/fp');\n\n// Bidirectional infinite tape\nclass Tape {\n  constructor(blank, input) {\n    Object.defineProperty(this, 'blank', {\n      value: blank,\n      writable: false,\n      enumerable: true\n    });\n    // zipper data structure\n    // INVARIANTS: tape.before can be empty, tape.after must be nonempty.\n    // before: cells before the head (in order; left to right).\n    // after:  cells after and including the head (in reverse; right to left).\n    this.tape = {\n      before: [],\n      after: (input == null || input.length == 0) ? [blank] : input.slice().reverse(),\n      toString: function () {\n        return this.before.join('') + 'ðŸ”Ž' + this.after.slice().reverse().join('');\n      }\n    };\n  }\n\n  // Read the value at the tape head.\n  read() {\n    return _.last(this.tape.after);\n  }\n\n  write(symbol) {\n    this.tape.after[this.tape.after.length - 1] = symbol;\n  }\n\n  headRight() {\n    const before = this.tape.before, after = this.tape.after;\n    before.push(after.pop());\n    if (_.isEmpty(after)) {\n      after.push(this.blank);\n    }\n  }\n\n  headLeft() {\n    const before = this.tape.before, after = this.tape.after;\n    if (_.isEmpty(before)) {\n      before.push(this.blank);\n    }\n    after.push(before.pop());\n  }\n\n  toString() {\n    return this.tape.toString();\n  }\n\n  // for tape visualization. not part of TM definition.\n  // Read the value at an offset from the tape head.\n  // 0 is the tape head. + is to the right, - to the left.\n  readOffset(i) {\n    const tape = this.tape;\n    if (i >= 0) {\n      // right side: offset [0..length-1] â†¦ array index [length-1..0]\n      return (i <= tape.after.length - 1) ? tape.after[tape.after.length - 1 - i] : this.blank;\n    } else {\n      // left side: offset [-1..-length] â†¦ array index [length-1..0]\n      return (i >= -tape.before.length) ? tape.before[tape.before.length + i] : this.blank;\n    }\n  }\n\n  // for tape visualization.\n  // Read the values from an offset range (inclusive of start and end).\n  readRange(start, end) {\n    return _.range(start, end+1).map(function (i) {\n      return this.readOffset(i);\n    }, this);\n  }\n}\n\nmodule.exports = Tape;\n","'use strict';\nconst Tape = require('./Tape.js'), d3   = require('d3');\nrequire('./tape.css');\n\nconst cellWidth = 50;\nconst cellHeight = 50;\n\nfunction initTapeCells(selection) {\n  selection.attr('class', 'tape-cell');\n  selection.append('rect')\n  // the box outline is purely visual, so remove its data binding\n    .datum(null)\n    .attr({'width': cellWidth,\n      'height': cellHeight});\n  selection.append('text')\n    .text(d => { return d; })\n    .attr({'x': cellWidth/2, 'y': cellHeight/2 + 8});\n  return selection;\n}\n\nfunction positionCells(selection, offset) {\n  offset = (offset == null) ? 0 : offset;\n  selection.attr('transform', (d, i) => {\n    return 'translate(' + (-cellWidth+10 + cellWidth*(i+offset)) + ')';\n  });\n  return selection;\n}\n\nfunction repositionWrapper(wrapper) {\n  wrapper.attr('transform', 'translate(0 10)')\n    .transition()\n    .duration(0)\n    .select('.exiting')\n    .remove();\n}\n\n// Tape visualization centered around the tape head.\nclass TapeViz extends Tape {\n  constructor(svg, lookaround, blank, input) {\n    super(blank, input);\n\n    Object.defineProperty(this, 'lookaround', {\n      value: lookaround,\n      writable: false,\n      enumerable: true\n    });\n    Object.defineProperty(this, 'domNode', {\n      value: svg,\n      writable: false,\n      enumerable: true\n    });\n\n    // width is before + head + after, trimming 2 off to show cut-off tape ends\n    const width  = cellWidth * (lookaround+1+lookaround-2) + 2*10;\n    const height = cellHeight + 2*10;\n    svg.attr({\n      'width': '95%',\n      'viewBox': [0, 0, width, height].join(' ')\n    });\n\n    this.wrapper = svg.append('g')\n      .attr('class', 'wrapper')\n      .call(repositionWrapper);\n\n    svg.append('rect')\n      .attr({'id': 'tape-head',\n        'width': (1+1/5) * cellWidth,\n        'height': (1+1/5) * cellHeight,\n        'x': -cellWidth+10/2 + cellWidth*lookaround,\n        'y': 10/2\n      });\n\n    this.wrapper.selectAll('.tape-cell')\n      .data(this.readRange(-lookaround, lookaround))\n      .enter()\n      .append('g')\n      .call(initTapeCells)\n      .call(positionCells)\n    ;\n  }\n\n  // IDEA: chain headLeft/Right to wait for write()?\n  write(symbol) {\n    // don't animate if symbol stays the same\n    if (Tape.prototype.read.call(this) === symbol) {\n      return;\n    }\n    super.write(symbol);\n\n    // remove leftover .exiting in case animation was interrupted\n    this.wrapper.selectAll('.exiting').remove();\n\n    d3.select(this.wrapper[0][0].childNodes[this.lookaround])\n      .datum(symbol)\n      .select('text')\n      .attr('fill-opacity', '1')\n      .attr('stroke-opacity', '1')\n      .transition()\n      .attr('fill-opacity', '0.4')\n      .attr('stroke-opacity', '0.1')\n      .transition()\n      .text(d => { return d; })\n      .attr('fill-opacity', '1')\n      .attr('stroke-opacity', '1')\n      .transition()\n      .duration(0)\n      .attr('fill-opacity', null)\n      .attr('stroke-opacity', null)\n    ;\n  }\n\n  headRight() {\n    super.headRight();\n    // remove leftover .exiting in case animation was interrupted.\n    // Important: call-by-value evaluates the selection argument(s) of 'moveHead' before\n    // before entering the function, so exiting nodes have to be removed beforehand.\n    this.wrapper.selectAll('.exiting').remove();\n    moveHead(this.wrapper,\n      // add to right end\n      this.wrapper.append('g')\n        .datum(this.readOffset(this.lookaround)),\n      // remove from left end\n      this.wrapper.select('.tape-cell'),\n      1, -1);\n  }\n\n  headLeft() {\n    super.headLeft();\n    this.wrapper.selectAll('.exiting').remove();\n    moveHead(this.wrapper,\n      this.wrapper.insert('g', ':first-child')\n        .datum(this.readOffset(-this.lookaround)),\n      this.wrapper.select('.wrapper > .tape-cell:last-of-type'),\n      -1, 0);\n  }\n}\n\nfunction moveHead(wrapper, enter, exit, wOffset, cOffset) {\n  // add to one end\n  enter.call(initTapeCells);\n  // remove from the other end\n  exit.classed('exiting', true);\n  // translate cells forward, and the wrapper backwards\n  wrapper.selectAll('.tape-cell')\n    .call(positionCells, cOffset);\n  wrapper\n    .attr('transform', 'translate(' + (wOffset*cellWidth).toString() + ' 10)')\n    // animate wrapper returning to neutral position\n    .transition()\n    .call(repositionWrapper);\n}\n\nmodule.exports = TapeViz;\n","'use strict';\n// misc. utilities\n\n//////////////////////////////////\n// Utilities for null/undefined //\n//////////////////////////////////\n\n// Assert non-null.\n// Return the value if it is not null or undefined; otherwise, throw an error.\nfunction nonNull(value) {\n  if (value == null) {\n    throw new Error('expected a non-null defined value, but got: ' + String(value));\n  }\n  return value;\n}\n\n// Null coalescing: iff the first argument is null or undefined, return the second.\nfunction coalesce(a, b) {\n  return (a != null) ? a : b;\n}\n\n// Apply a function to a value if non-null, otherwise return the value.\n// (Monadic bind for maybe (option) type.)\n// ((a -> b), ?a) -> ?b\nfunction applyMaybe(f, x) {\n  return (x != null) ? f(x) : x;\n}\n\n// Returns the first function result that is not null or undefined.\n// Otherwise, returns undefined.\n// ((a -> ?b), [a]) -> ?b\nfunction getFirst(f, xs) {\n  for (let i = 0; i < xs.length; ++i) {\n    const val = f(xs[i]);\n    if (val != null) {\n      return val;\n    }\n  }\n}\n\n/////////\n// DOM //\n/////////\n\n/* global document */\n\n/**\n * Concat an array of DOM Nodes into a DocumentFragment.\n * @param  {[Node]} array\n * @return {DocumentFragment}\n */\nfunction toDocFragment(array) {\n  const result = document.createDocumentFragment();\n  array.forEach(result.appendChild.bind(result));\n  return result;\n}\n\n///////////////////////\n// IE/Edge detection //\n///////////////////////\n\n// http://stackoverflow.com/a/9851769\nconst isBrowserIEorEdge = /*@cc_on!@*/false\n  || Boolean(document.documentMode) || Boolean(window.StyleMedia); // eslint-disable-line\n\n\nexports.nonNull = nonNull;\nexports.coalesce = coalesce;\nexports.applyMaybe = applyMaybe;\nexports.getFirst = getFirst;\n\nexports.toDocFragment = toDocFragment;\n\nexports.isBrowserIEorEdge = isBrowserIEorEdge;\n","'use strict';\n/**\n * Lightweight property assignment watching by overriding getters/setters.\n * Intended as a bridge between plain JS properties and other libraries.\n *\n * Inspired by https://gist.github.com/eligrey/384583, which works for\n * data properties only, this works for both data and accessor properties.\n *\n * 2015-11-21\n * @author Andy Li\n */\n\n/**\n * Watches a property for assignment by overriding it with a getter & setter\n * on top of the previous value or accessors.\n *\n * The handler can intercept assignments by returning a different value.\n * Watching an unwritable/unsettable property does nothing, but trying to watch\n * a non-existent or non-configurable property fails fast with TypeError.\n * @param  {!Object} thisArg The object that contains the property.\n * @param  {String}  prop    The name of the property to watch.\n * @param            handler The function to call when the property is\n *   assigned to. Important: this function intercepts assignment;\n *   its return value is set as the new value.\n * @throws {TypeError} if object is null or does not have the property\n * @throws {TypeError} if thisArg.prop is non-configurable\n * @return {?Object}         The previous property descriptor, or null if the\n *   property is not writable/settable.\n */\nfunction watch(thisArg, prop, handler) {\n  const desc = Object.getOwnPropertyDescriptor(thisArg, prop);\n  // check pre-conditions: existent, configurable, writable/settable\n  if (desc === undefined) {\n    throw new TypeError('Cannot watch nonexistent property \\''+prop+'\\'');\n  } else if (!desc.configurable) {\n    throw new TypeError('Cannot watch non-configurable property \\''+prop+'\\'');\n  } else if (!desc.writable && desc.set === undefined) {\n    return; // no-op since property can't change without reconfiguration\n  }\n\n  const accessors = (() => {\n    if (desc.set) {\n      // case: .get/.set\n      return {\n        get: desc.get,\n        set: function (newval) {\n          return desc.set.call(thisArg, handler.call(thisArg, prop, thisArg[prop], newval));\n        }\n      };\n    } else {\n      // case: .value\n      let val = desc.value;\n      return {\n        get: function () {\n          return val;\n        },\n        set: function (newval) {\n          return val = handler.call(thisArg, prop, val, newval);\n        }\n      };\n    }\n  })();\n  Object.defineProperty(thisArg, prop, accessors);\n\n  return desc;\n}\n\n/**\n * {@link watch} that, if successful, also calls the handler once with\n *   the current value (by setting it).\n * @see watch\n */\nfunction watchInit(thisArg, prop, handler) {\n  const value = thisArg[prop];\n  const desc = watch(thisArg, prop, handler);\n  if (desc) { thisArg[prop] = value; }\n  return desc;\n}\n\nif (typeof exports === 'object') {\n  exports.watch = watch;\n  exports.watchInit = watchInit;\n}\n","module.exports = _;","module.exports = d3;","module.exports = lodash;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(6095);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/build/\";"],"sourceRoot":""}